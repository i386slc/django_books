# 1.11 Установка UTF-8 в качестве кодировки по умолчанию для конфигурации MySQL

MySQL описывает себя как самую популярную базу данных с открытым исходным кодом. В этом рецепте мы расскажем вам, как установить для него кодировку **UTF-8** по умолчанию. Обратите внимание, что если вы не установите эту кодировку в конфигурации базы данных, вы можете попасть в ситуацию, когда **LATIN1** используется по умолчанию с вашими данными в кодировке **UTF-8**. Это приведет к ошибкам базы данных всякий раз, когда используются такие символы, как **€**. Этот рецепт также избавит вас от трудностей преобразования данных базы данных из **LATIN1** в **UTF-8**, особенно если у вас есть одни таблицы, закодированные в **LATIN1**, а другие - в **UTF-8**.

## Подготовка

Убедитесь, что система управления базами данных MySQL и модуль Python **mysqlclient** установлены и что вы используете движок MySQL в настройках вашего проекта.

## Как это сделать...

Откройте файл конфигурации `/etc/mysql/my.cnf` MySQL в своем любимом редакторе и убедитесь, что в разделах `[client]`, `[mysql]` и `[mysqld]` установлены следующие параметры:

```apacheconf
# /etc/mysql/my.cnf
[client]
default-character-set = utf8

[mysql]
default-character-set = utf8

[mysqld]
collation-server = utf8_unicode_ci
init-connect = 'SET NAMES utf8'
character-set-server = utf8
```

Если какой-либо из разделов не существует, создайте их в файле. Если разделы уже существуют, добавьте эти параметры в существующие конфигурации, а затем перезапустите MySQL в инструменте командной строки следующим образом:

```bash
$ /etc/init.d/mysql restart
```

## Как это работает...

Теперь всякий раз, когда вы создаете новую базу данных MySQL, базы данных и все их таблицы будут по умолчанию установлены в кодировке **UTF-8**. Не забудьте настроить это на всех компьютерах, на которых разрабатывается или публикуется ваш проект.

## Есть еще кое-что...

В PostgreSQL серверная кодировка по умолчанию уже UTF-8, но если вы хотите явно создать базу данных PostgreSQL с кодировкой UTF-8, вы можете сделать это с помощью следующей команды:

```bash
$ createdb --encoding=UTF8 --locale=en_US.UTF-8 --template=template0 myproject
```

## Смотрите также

* Рецепт [создания файловой структуры проекта](1.4-sozdanie-failovoi-struktury-proekta.md)
* Рецепт Работа с контейнерами Docker для Django, Gunicorn, Nginx и PostgreSQL

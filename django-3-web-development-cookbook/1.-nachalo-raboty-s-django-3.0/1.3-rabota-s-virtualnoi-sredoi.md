# 1.3 Работа с виртуальной средой

Вполне вероятно, что вы будете разрабатывать несколько проектов Django на своем компьютере. Некоторые модули, такие как **virtualenv**, **setuptools**, **wheel** или **Ansible**, можно установить один раз, а затем использовать для всех проектов. Другие модули, такие как **Django**, сторонние библиотеки Python и приложения Django, должны быть изолированы друг от друга. Инструмент **virtualenv** — это утилита, которая разделяет все проекты Python и сохраняет их в своих собственных областях. В этом рецепте мы увидим, как его использовать.

## Подготовка

Для управления пакетами Python вам понадобится **pip**. Если вы используете Python 3.4+, он будет включен в вашу установку Python. Если вы используете другую версию Python, вы можете установить **pip**, выполнив инструкции по установке на [сайте pip](https://pip.pypa.io/en/stable/installing/). Давайте обновим общие модули Python, **pip**, **setuptools** и **wheel**:

```bash
$ sudo pip3 install --upgrade pip setuptools wheel
```

Виртуальная среда встроена в Python, начиная с версии 3.3.

## Как это сделать...

После установки необходимых компонентов создайте каталог, в котором будут храниться все ваши проекты Django — например, **projects** в вашем домашнем каталоге. После создания каталога выполните следующие шаги:

1. Перейдите во вновь созданный каталог и создайте виртуальную среду, использующую общие системные пакеты сайта:

```bash
$ cd ~/projects
$ mkdir myproject_website
$ cd myproject_website
$ python3 -m venv env
```

2\. Чтобы использовать только что созданную виртуальную среду, вам необходимо выполнить сценарий активации в вашей текущей оболочке. Это можно сделать с помощью следующей команды:

```bash
$ source env/bin/activate
```

3\. В зависимости от используемой вами оболочки команда **source** может быть недоступна. Другой способ получить файл — следующая команда, которая дает тот же результат (обратите внимание на пробел между точкой и **env**):

```bash
$ . env/bin/activate
```

4\. Вы увидите, что приглашение инструмента командной строки получает префикс имени проекта следующим образом:

```bash
(env)$
```

5\. Чтобы выйти из виртуальной среды, введите следующую команду:

```bash
(env)$ deactivate
```

## Как это работает...

Когда вы создаете виртуальную среду, создается несколько конкретных каталогов (**bin**, **include** и **lib**) для хранения копии установки Python, а также определяются некоторые общие пути Python. Когда виртуальная среда активирована, все, что вы устанавливаете с помощью **pip** или **easy\_install**, будет помещено и использовано пакетами сайта виртуальной среды, а не глобальными пакетами сайта вашей установки Python.

Чтобы установить последнюю версию Django 3.0.x в вашей виртуальной среде, введите следующую команду:

```bash
(env)$ pip install "Django~=3.0.0"
```

## Смотрите также

* Рецепт [Создание файловой структуры проекта](1.4-sozdanie-failovoi-struktury-proekta.md)
* Рецепт Работа с контейнерами Docker для Django, Gunicorn, Nginx и PostgreSQL
* Рецепт «Развертывание на Apache с mod\_wsgi для промежуточной среды» в главе 12 «Развертывание».
* Рецепт «Развертывание на Apache с mod\_wsgi для производственной среды» в главе 12 «Развертывание».
* Рецепт «Развертывание промежуточной среды на Nginx и Gunicorn» в главе 12 «Развертывание».
* Рецепт «Развертывание на Nginx и Gunicorn для производственной среды» в главе 12 «Развертывание».
